<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>TC Garments</title>
<meta name="theme-color" content="#000000">
<link rel="manifest" href="/manifest.json">
<link rel="apple-touch-icon" sizes="180x180" href="icons/hrrr_180.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<style>
  @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@700;900&display=swap');

  *{margin:0;padding:0;box-sizing:border-box}
  body{
    font-family:'Cairo',sans-serif;
    background:#000;
    color:#fff;
    min-height:100vh;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    overflow:hidden;
    position:relative;
  }

  /* أنيميشن خلفية نقط حمراء بتتحرك ببطء وبتلمع - جامد فشخ */
  .bg{
    position:fixed;
    inset:0;
    background:transparent;
    pointer-events:none;
    z-index:0;
  }
  .dot{
    position:absolute;
    width:6px;
    height:6px;
    background:#ff0040;
    border-radius:50%;
    box-shadow:0 0 20px #ff0040, 0 0 40px #ff0040;
    animation:float 15s infinite linear;
  }
  @keyframes float{
    0%{transform:translateY(100vh) scale(0);}
    100%{transform:translateY(-100px) scale(1);}
  }

  /* اللوجو دايرة كبيرة في النص العلوي زي الإنستغرام */
  .logo{
    width:140px;
    height:140px;
    border-radius:50%;
    object-fit:cover;
    border:5px solid #ff0040;
    box-shadow:0 0 40px rgba(255,0,64,0.8), 0 0 80px rgba(255,0,64,0.4);
    margin-bottom:40px;
    z-index:10;
    animation:pulse 4s infinite;
  }
  @keyframes pulse{
    0%,100%{box-shadow:0 0 40px rgba(255,0,64,0.8);}
    50%{box-shadow:0 0 80px rgba(255,0,64,1), 0 0 120px rgba(255,0,64,0.6);}
  }

  /* الكارت */
  .card{
    background:rgba(15,15,15,0.85);
    backdrop-filter:blur(20px);
    padding:45px 35px;
    border-radius:30px;
    width:90%;
    max-width:420px;
    text-align:center;
    border:1px solid rgba(255,0,64,0.3);
    box-shadow:0 20px 60px rgba(0,0,0,0.8);
    z-index:10;
  }

  h2{
    color:#ff3366;
    font-size:28px;
    margin-bottom:30px;
    text-shadow:0 0 20px #ff0040;
  }

  input{
    width:100%;
    padding:18px 22px;
    margin:15px 0;
    background:#111;
    border:none;
    border-radius:50px;
    color:#fff;
    font-size:17px;
    outline:none;
    border:2px solid transparent;
    transition:all .4s;
  }
  input:focus{
    border:2px solid #ff0040;
    box-shadow:0 0 30px rgba(255,0,64,0.5);
  }
  input::placeholder{color:#ff336680}

  /* الأزرار مستديرة + ظل أحمر-أسود ثقيل */
  button{
    width:100%;
    padding:18px;
    background:linear-gradient(145deg,#ff0040,#cc0033);
    color:white;
    border:none;
    border-radius:50px;
    font-size:19px;
    font-weight:900;
    cursor:pointer;
    margin-top:20px;
    box-shadow:0 10px 30px rgba(255,0,64,0.6), 0 20px 50px rgba(0,0,0,0.7);
    transition:all .4s;
  }
  button:hover:not(:disabled){
    transform:translateY(-6px);
    box-shadow:0 20px 50px rgba(255,0,64,0.8), 0 30px 70px rgba(0,0,0,0.9);
  }
  button:disabled{
    background:#333;
    box-shadow:none;
    transform:none;
  }

  p#status{
    margin-top:20px;
    color:#ff3366;
    font-weight:bold;
    min-height:30px;
  }

  footer{
    margin-top:50px;
    color:#666;
    font-size:14px;
    z-index:10;
  }
  .footer-link{color:#ff0040;text-decoration:none;font-weight:bold}
  .support-btn{
    background:#25d366;
    color:white;
    padding:10px 25px;
    border-radius:30px;
    text-decoration:none;
    margin-top:10px;
    display:inline-block;
  }
</style>
</head>
<body>

<div class="bg" id="bg"></div>

<img src="hrrr.png" alt="Logo" class="logo">

<div class="card">
  <h2>تسجيل الدخول</h2>
  <input type="text" id="name" placeholder="الاسم الكامل">
  <input type="text" id="code" placeholder="الكود الخاص">
  <button id="registerBtn">دخول</button>
  <p id="status"></p>
</div>

<footer>
  © 2026 <a href="#" onclick="openExternalLink('https://facebook.com/kadinioo')" class="footer-link">Ahmed Elkady - Kadysoft Ltd.</a><br>
  <a href="#" onclick="openExternalLink('https://wa.me/201555266002')" class="support-btn">الدعم الفني (واتساب)</a>
</footer>

<!-- أنيميشن النقط الحمراء الجامدة -->
<script>
setInterval(()=>{
  const dot = document.createElement('div');
  dot.classList.add('dot');
  dot.style.left = Math.random()*100 + 'vw';
  dot.style.animationDuration = (Math.random()*10 + 10) + 's';
  document.getElementById('bg').appendChild(dot);
  setTimeout(()=>dot.remove(), 20000);
}, 300);
</script>

<!-- كل السكربتات الأصلية بدون أي تغيير -->
<script>
function openExternalLink(url) {
  window.location.href = "intent://" + url.replace(/^https?:\/\//, '') + "#Intent;package=com.android.chrome;scheme=https;end;";
}
</script>

<script>
const API_URL = "https://corsproxy.io/?" + encodeURIComponent("https://script.google.com/macros/s/AKfycby8B5XNXUvcTgeeQjgd4aHxyonwqQvN21sHQ0Uy4RAn92opu1hxaULfTmaGDhMSMswfDw/exec");
const nameInput = document.getElementById("name");
const codeInput = document.getElementById("code");
const btn = document.getElementById("registerBtn");
const status = document.getElementById("status");

window.addEventListener("DOMContentLoaded", () => {
  const savedName = localStorage.getItem("name");
  const savedCode = localStorage.getItem("code");
  if (savedName && savedCode) {
    nameInput.value = savedName;
    codeInput.value = savedCode;
    checkStatus(savedName, savedCode);
  }
});

btn.addEventListener("click", async () => {
  const name = nameInput.value.trim();
  const code = codeInput.value.trim();
  if (!name || !code) { alert("من فضلك أدخل الاسم والكود أولاً."); return; }
  btn.disabled = true;
  status.textContent = "جارٍ التحقق...";
  try {
    const res = await fetch(`${API_URL}?action=register&name=${encodeURIComponent(name)}&code=${encodeURIComponent(code)}`);
    const data = await res.json();
    localStorage.setItem("name", name);
    localStorage.setItem("code", code);
    handleStatus(data.status);
  } catch (err) {
    status.textContent = "فشل الاتصال.";
    btn.disabled = false;
  }
});

async function checkStatus(name, code) {
  status.textContent = "جارٍ التحقق...";
  disableInputs();
  try {
    const res = await fetch(`${API_URL}?action=check&name=${encodeURIComponent(name)}&code=${encodeURIComponent(code)}`);
    const data = await res.json();
    handleStatus(data.status);
  } catch (err) {
    status.textContent = "فشل الاتصال.";
    enableInputs();
  }
}

function handleStatus(state) {
  switch (state) {
    case "نعم": status.textContent = "تمت الموافقة! جاري التحويل..."; setTimeout(() => location.href = "index2.html", 1200); break;
    case "لا": status.textContent = "تم رفض الطلب."; localStorage.clear(); enableInputs(); break;
    case "لسه": status.textContent = "في انتظار الموافقة..."; disableInputs(); break;
    default: status.textContent = "حالة غير معروفة."; localStorage.clear(); enableInputs(); break;
  }
}

function disableInputs() { nameInput.disabled = codeInput.disabled = btn.disabled = true; }
function enableInputs() { nameInput.disabled = codeInput.disabled = btn.disabled = false; }
</script>

<script>
if ('serviceWorker' in navigator) navigator.serviceWorker.register('/sw.js');
</script>

</body>
</html>

